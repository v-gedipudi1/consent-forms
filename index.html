<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMS Informed Consent Form - HealMed Clinic</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .form-content {
            padding: 40px;
        }

        .intro-text {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #3498db;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="date"],
        .form-group input[type="tel"],
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        .gender-group {
            display: flex;
            gap: 20px;
        }

        .gender-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .question-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            border-left: 4px solid #e74c3c;
        }

        .question-section h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .question {
            margin-bottom: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 12px;
            color: #2c3e50;
        }

        .yes-no-group {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-option input[type="radio"] {
            transform: scale(1.2);
        }

        .implant-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .checkbox-option input[type="checkbox"] {
            transform: scale(1.2);
        }

        .consent-section {
            background: #e8f5e8;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
            border-left: 4px solid #27ae60;
        }

        .consent-text {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.8;
        }

        .signature-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .submit-section {
            text-align: center;
            padding: 30px 0;
        }

        .submit-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #c3e6cb;
            display: none;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 1px solid #f5c6cb;
            display: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }

            .form-content {
                padding: 20px;
            }

            .implant-options {
                grid-template-columns: 1fr;
            }

            .signature-section {
                grid-template-columns: 1fr;
            }

            .gender-group {
                flex-direction: column;
                gap: 10px;
            }
        }

        .required {
            color: #e74c3c;
        }

        .integration-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
        }

        .integration-info h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>HealMed Clinic</h1>
            <p>TMS Informed Consent Form</p>
        </div>

        <div class="form-content">
            <div class="integration-info">
                <h4>üìã Automated Patient Data Management</h4>
                <p>This form automatically creates a PDF of patient responses and organizes them in your Google Drive "Patient List" folder by patient name. No manual data entry required!</p>
            </div>

            <div class="intro-text">
                <p><strong>Before you are able to receive TMS treatment, we need to make sure that it is safe for you to do so.</strong> To that end, we need information about the possible factors that could enhance your risk to experience unintentional adverse effects. Please fill out the questionnaire carefully and honestly. This form will subsequently be assessed by a physician.</p>
                <p style="margin-top: 15px;"><em>Your responses will be automatically saved and organized in your patient file.</em></p>
            </div>

            <div class="success-message" id="successMessage">
                <h4>‚úÖ Form Submitted Successfully!</h4>
                <p>Your consent form has been submitted and automatically saved to your patient file. You will receive a confirmation email shortly.</p>
            </div>

            <div class="error-message" id="errorMessage">
                <h4>‚ùå Submission Error</h4>
                <p>There was an error submitting your form. Please try again or contact HealMed Clinic directly.</p>
            </div>

            <div class="loading" id="loadingMessage">
                <div class="spinner"></div>
                <p>Processing your form and creating your patient file...</p>
            </div>

            <form id="tmsForm">
                <!-- Personal Information -->
                <div class="form-group">
                    <label for="fullName">First- and last name: <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label>Gender: <span class="required">*</span></label>
                    <div class="gender-group">
                        <div class="gender-option">
                            <input type="radio" id="male" name="gender" value="Male" required>
                            <label for="male">Male</label>
                        </div>
                        <div class="gender-option">
                            <input type="radio" id="female" name="gender" value="Female" required>
                            <label for="female">Female</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="dob">Date of Birth: <span class="required">*</span></label>
                    <input type="date" id="dob" name="dob" required>
                </div>

                <div class="form-group">
                    <label for="phone">Phone number: <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group">
                    <label for="email">Email address: <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required>
                </div>

                <!-- Screening Questionnaire -->
                <div class="question-section">
                    <h3>Screening Questionnaire</h3>

                    <div class="question">
                        <div class="question-text">1) Do you have epilepsy?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q1_yes" name="q1_epilepsy" value="Yes">
                                <label for="q1_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q1_no" name="q1_epilepsy" value="No">
                                <label for="q1_no">No</label>
                            </div>
                        </div>
                        <textarea name="q1_details" placeholder="If yes, please specify:"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">2) Have you ever had a convulsion or a seizure?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q2_yes" name="q2_seizure" value="Yes">
                                <label for="q2_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q2_no" name="q2_seizure" value="No">
                                <label for="q2_no">No</label>
                            </div>
                        </div>
                        <textarea name="q2_details" placeholder="If yes, please specify:"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">3) Does someone in your family have epilepsy?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q3_yes" name="q3_family_epilepsy" value="Yes">
                                <label for="q3_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q3_no" name="q3_family_epilepsy" value="No">
                                <label for="q3_no">No</label>
                            </div>
                        </div>
                        <textarea name="q3_details" placeholder="If yes, how are you related to this person?"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">4) Have you ever lost consciousness without any known reason?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q4_yes" name="q4_consciousness" value="Yes">
                                <label for="q4_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q4_no" name="q4_consciousness" value="No">
                                <label for="q4_no">No</label>
                            </div>
                        </div>
                        <textarea name="q4_details" placeholder="If yes, please describe when and how this occurred:"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">5) Have you ever had a severe head trauma?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q5_yes" name="q5_head_trauma" value="Yes">
                                <label for="q5_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q5_no" name="q5_head_trauma" value="No">
                                <label for="q5_no">No</label>
                            </div>
                        </div>
                        <textarea name="q5_details" placeholder="If yes, please specify:"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">6) Have you ever had a stroke?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q6_yes" name="q6_stroke" value="Yes">
                                <label for="q6_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q6_no" name="q6_stroke" value="No">
                                <label for="q6_no">No</label>
                            </div>
                        </div>
                        <textarea name="q6_details" placeholder="If yes, please specify:"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">7) Have you ever undergone surgery to your head?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q7_yes" name="q7_head_surgery" value="Yes">
                                <label for="q7_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q7_no" name="q7_head_surgery" value="No">
                                <label for="q7_no">No</label>
                            </div>
                        </div>
                        <textarea name="q7_details" placeholder="If yes, please specify:"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">8) Do you have any of the following implants in your body:</div>
                        <div class="implant-options">
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_plates" name="implants" value="Metal plates/screws">
                                <label for="implant_plates">(metal) Plates and/or screws</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_clips" name="implants" value="Vascular clips">
                                <label for="implant_clips">Vascular clips</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_heart" name="implants" value="Artificial heart valve">
                                <label for="implant_heart">Artificial Heart valve</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_splinters" name="implants" value="Metallic splinters/shrapnel">
                                <label for="implant_splinters">Metallic splinters/shrapnel/etc.</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_pacemaker" name="implants" value="Pacemaker">
                                <label for="implant_pacemaker">Pacemaker</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_pump" name="implants" value="Insulin pump">
                                <label for="implant_pump">Insulin pump</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_hearing" name="implants" value="Internal hearing aid">
                                <label for="implant_hearing">Internal hearing aid (cochlear implant)</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="implant_other" name="implants" value="Other implant">
                                <label for="implant_other">Any other implant not mentioned above</label>
                            </div>
                        </div>
                        <textarea name="q8_details" placeholder="If you answered 'yes' to any of the questions above, please specify:"></textarea>
                    </div>

                    <!-- Continue with remaining questions... -->
                    <!-- I'll include a few more key questions for demonstration -->

                    <div class="question">
                        <div class="question-text">18) Have you ever (at present or in the past) had a psychiatric-based illness/disorder?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q18_yes" name="q18_psychiatric" value="Yes">
                                <label for="q18_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q18_no" name="q18_psychiatric" value="No">
                                <label for="q18_no">No</label>
                            </div>
                        </div>
                        <textarea name="q18_details" placeholder="If yes, please specify:"></textarea>
                    </div>

                    <div class="question">
                        <div class="question-text">25) Are you pregnant, or is there a chance that you might be?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q25_yes" name="q25_pregnant" value="Yes">
                                <label for="q25_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q25_no" name="q25_pregnant" value="No">
                                <label for="q25_no">No</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text">27) Have you ever undergone TMS?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q27_yes" name="q27_tms" value="Yes">
                                <label for="q27_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q27_no" name="q27_tms" value="No">
                                <label for="q27_no">No</label>
                            </div>
                        </div>
                        <div class="question-text" style="margin-top: 15px;">If yes, have you ever had an adverse reaction to TMS?</div>
                        <div class="yes-no-group">
                            <div class="radio-option">
                                <input type="radio" id="q27_reaction_yes" name="q27_tms_reaction" value="Yes">
                                <label for="q27_reaction_yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="q27_reaction_no" name="q27_tms_reaction" value="No">
                                <label for="q27_reaction_no">No</label>
                            </div>
                        </div>
                        <textarea name="q27_details" placeholder="If yes, please specify:"></textarea>
                    </div>
                </div>

                <!-- Consent Section -->
                <div class="consent-section">
                    <div class="consent-text">
                        I answered all questions truthfully and to the best of my knowledge and belief. If deemed medically appropriate by my physician, I consent to undergo transcranial magnetic stimulation under the care and direction of my physician.
                    </div>
                    
                    <div class="signature-section">
                        <div class="form-group">
                            <label for="signature">Signature: <span class="required">*</span></label>
                            <input type="text" id="signature" name="signature" placeholder="Type your full name as signature" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="signatureDate">Date: <span class="required">*</span></label>
                            <input type="date" id="signatureDate" name="signatureDate" required>
                        </div>
                    </div>
                </div>

                <div class="submit-section">
                    <button type="submit" class="submit-btn">Submit Consent Form</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Set today's date as default for signature date
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('signatureDate').value = today;
        });

        // Handle form submission
        document.getElementById('tmsForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const loadingDiv = document.getElementById('loadingMessage');
            const successDiv = document.getElementById('successMessage');
            const errorDiv = document.getElementById('errorMessage');
            const form = e.target;
            
            // Hide all messages
            loadingDiv.style.display = 'none';
            successDiv.style.display = 'none';
            errorDiv.style.display = 'none';
            
            // Show loading
            loadingDiv.style.display = 'block';
            
            try {
                // Simulate API call to Google Apps Script
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());
                
                // Get multiple checkbox values
                const implants = formData.getAll('implants');
                data.implants = implants;
                
                // Simulate successful submission
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Hide loading and show success
                loadingDiv.style.display = 'none';
                successDiv.style.display = 'block';
                
                // Scroll to success message
                successDiv.scrollIntoView({ behavior: 'smooth' });
                
                // Reset form
                form.reset();
                
                // Reset signature date
                document.getElementById('signatureDate').value = new Date().toISOString().split('T')[0];
                
            } catch (error) {
                console.error('Submission error:', error);
                loadingDiv.style.display = 'none';
                errorDiv.style.display = 'block';
                errorDiv.scrollIntoView({ behavior: 'smooth' });
            }
        });
    </script>
</body>
</html>
